"""
Please do not edit this file manually.
This file is automatically generated by the `scripts/generate_endpoints.py` script.
"""

from typing import Any, ClassVar, Annotated, Literal
from typing_extensions import Self
from datetime import datetime, date

from pydantic import Field, ConfigDict, BeforeValidator, AfterValidator, model_validator

from courtlistener.utils import (
    choice_validator,
    multiple_choice_validator,
    related_validator,
    in_pre_validator,
    try_coerce_ints,
    in_post_validator,
    relative_date_validator,
    search_model_validator,
)
from courtlistener.models.endpoint import Endpoint
{% for field in endpoint.fields.values() %}
{% if field.filter_class %}
from courtlistener.models.filters import {{ field.filter_class }}
{% endif %}
{% endfor %}


class {{ endpoint.class_name }}(Endpoint):
    """{{ endpoint.description }}"""

    endpoint: ClassVar[str] = "{{ endpoint.endpoint }}"
    endpoint_id: ClassVar[str] = "{{ endpoint.id }}"
    endpoint_name: ClassVar[str] = "{{ endpoint.name }}"

{% for field in endpoint.fields.values() %}
{% if field.literal_value %}
    {{ field.id }}: Literal["{{ field.literal_value }}"] = "{{ field.literal_value }}"
{% elif field.types %}
    {{ field.id }}: Annotated[
        None | {{ field.types_str }}{% if field.filter_class %} | {{ field.filter_class }}{% endif %}{% if field.related_id_types_str %} | {{ field.related_id_types_str }}{% endif %},
        Field(
            None,
            {% if field.description %}
            description={{ field.description | tojson }},
            {% endif %}
            {% if field.choices or field.related_class_name %}
            json_schema_extra={
                {% if field.choices %}
                "choices": {{ field.choices }},
                {% endif %}
                {% if field.related_class_name %}
                "related_class_name": "{{ field.related_class_name }}",
                {% endif %}
            },
            {% endif %}
            {% if field.alias %}
            alias="{{ field.alias }}",
            {% endif %}
        ),
        {% for validator in field.validators %}
        {{ validator }},
        {% endfor %}
    ]
{% endif %}
{% endfor %}

{% if endpoint.id == "search" %}
    @model_validator(mode="after")
    def validate_search(self) -> Self:
        assert search_model_validator(self.model_dump(by_alias=True))
        return self

{% endif %}
